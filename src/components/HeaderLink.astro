---
// src/components/HeaderLink.astro
import type { HTMLAttributes } from 'astro/types';

type Props = HTMLAttributes<'a'>;

const { href, class: className, ...props } = Astro.props;

//  CORRECCIN CLAVE: Usar Astro.resolve() para incluir la base URL (/acastrolab)
const finalHref = Astro.resolve(href);


// 1. Obtiene la ruta actual, limpiando la base URL si existiera.
// Si Astro.url.pathname es /acastrolab/blog/ y BASE_URL es /acastrolab, pathname ser谩 /blog/
const pathname = Astro.url.pathname.replace(import.meta.env.BASE_URL, '');

// 2. Normaliza el 'pathname' actual para la comparaci贸n.
const normalizedPathname = pathname.endsWith('/') ? pathname : pathname + '/';

// 3. Normaliza el 'href' (prop) para la comparaci贸n.
const normalizedHref = href.endsWith('/') ? href : href + '/';

// 4. L贸gica de Activaci贸n: Compara las rutas despu茅s de eliminar la base URL.
const isActive = normalizedHref === normalizedPathname;
---

<a href={finalHref} class:list={[className, { active: isActive }]} {...props}>
	<slot />
</a>

<style>
    /* ... */
</style>